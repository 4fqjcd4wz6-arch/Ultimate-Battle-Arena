<!doctype html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ultimate Battle Arena</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Core visual styles condensed and adapted from the provided design */
    :root{--primary:#4682b4;--primary-2:#87ceeb;--accent:#00ffff}
    html,body{height:100%}
    body{margin:0;font-family:Orbitron,Roboto,sans-serif;background:linear-gradient(135deg,#1a1a2e 0%,#16213e 50%,#0f3460 100%);color:#e0e6ed;min-height:100vh;}
    body::before{content:'';position:fixed;inset:0;background:radial-gradient(circle at 20% 80%,rgba(70,130,180,0.08) 0%,transparent 40%),radial-gradient(circle at 80% 20%,rgba(100,149,237,0.06) 0%,transparent 40%);pointer-events:none;z-index:-1;animation:backgroundShift 20s ease-in-out infinite alternate}
    @keyframes backgroundShift{0%{transform:translate(0,0);opacity:.35}100%{transform:translate(10px,5px);opacity:.55}}
    .container{max-width:1200px;margin:32px auto;background:rgba(20,28,44,0.85);border-radius:20px;padding:28px;border:1px solid rgba(70,130,180,0.2);box-shadow:0 10px 40px rgba(0,0,0,0.5);position:relative}
    .title{font-weight:900;text-transform:uppercase;letter-spacing:3px;text-align:center;font-size:clamp(1.6rem,4vw,3rem);background:linear-gradient(45deg,var(--primary),var(--primary-2));-webkit-background-clip:text;background-clip:text;color:transparent;text-shadow:0 0 20px rgba(70,130,180,0.45)}
    .subtitle{text-align:center;color:var(--primary-2);text-transform:uppercase;letter-spacing:2px;margin-top:6px}
    .nav{display:flex;gap:12px;justify-content:center;margin:24px 0;flex-wrap:wrap}
    .tab{padding:12px 20px;border-radius:14px;border:2px solid rgba(0,255,255,0.12);color:var(--accent);background:transparent;cursor:pointer;font-weight:700}
    .tab.active{background:linear-gradient(90deg,rgba(0,255,255,0.06),rgba(255,0,255,0.04));color:#fff;box-shadow:0 8px 30px rgba(0,255,255,0.08)}
    .grid{display:grid;grid-template-columns:1fr 360px;gap:20px}
    @media(max-width:900px){.grid{grid-template-columns:1fr;}.container{margin:16px}}
    .panel{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
    .actions{display:flex;gap:10px;flex-wrap:wrap}
    button.btn{background:var(--accent);color:#002;border:none;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--primary-2)}
    .log{height:220px;overflow:auto;background:rgba(0,0,0,0.12);padding:12px;border-radius:8px;font-family:monospace;font-size:0.92rem}
    .arena{display:flex;flex-direction:column;align-items:center;gap:18px}
    .stats{display:flex;gap:10px;justify-content:center}
    .stat{background:rgba(255,255,255,0.02);padding:8px 12px;border-radius:8px}
    .dice{width:120px;height:120px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:2.4rem;background:linear-gradient(180deg,rgba(255,255,255,0.03),transparent);box-shadow:inset 0 -10px 30px rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.04)}
    footer{margin-top:18px;text-align:center;color:rgba(255,255,255,0.6);font-size:0.9rem}
  </style>
</head>
<body>
  <div class="container">
    <h1 class="title">Ultimate Battle Arena</h1>
    <div class="subtitle">Défiez vos amis — mode local / démonstration</div>

    <nav class="nav" role="tablist" aria-label="Navigation">
      <button class="tab active" data-tab="play">Jouer</button>
      <button class="tab" data-tab="modes">Modes</button>
      <button class="tab" data-tab="about">À propos</button>
    </nav>

    <main class="grid">
      <section class="panel" id="main-panel">
        <div class="arena">
          <div class="stats" aria-live="polite">
            <div class="stat">Joueur: <strong id="player-name">Héros</strong></div>
            <div class="stat">Vie: <strong id="player-hp">100</strong></div>
            <div class="stat">Ennemi: <strong id="enemy-name">Orc</strong></div>
            <div class="stat">Vie: <strong id="enemy-hp">100</strong></div>
          </div>

          <div class="dice" id="dice">—</div>

          <div class="actions">
            <button class="btn" id="roll-btn">Lancer le dé</button>
            <button class="ghost" id="attack-btn">Attaquer</button>
            <button class="ghost" id="reset-btn">Réinitialiser</button>
          </div>

          <div class="panel log" id="log" aria-live="polite">Bienvenue dans l'arène — appuyez sur "Lancer le dé" pour commencer.</div>
        </div>
      </section>

      <aside class="panel">
        <h3 style="margin-top:0">Contrôles & partage</h3>
        <p>Le jeu est déployé via GitHub Pages. Pour partager: copiez l'URL publique ci‑dessous.</p>
        <div style="display:flex;gap:8px;align-items:center;margin-bottom:10px">
          <input id="site-url" class="w-full" readonly value="https://4fqjcd4wz6-arch.github.io/Ultimate-Battle-Arena/" />
          <button class="ghost" id="copy-url">Copier</button>
        </div>
        <h4>Astuce</h4>
        <ul style="padding-left:18px;margin:0">
          <li>Autorisez le son en cliquant sur l'un des boutons la première fois.</li>
          <li>La vibration fonctionne sur mobiles et en HTTPS.</li>
        </ul>
        <footer>© Ultimate Battle Arena</footer>
      </aside>
    </main>
  </div>

  <script>
    // Progressive audio init: requires user interaction to resume AudioContext on modern browsers
    let audioContext = null; // created on first interaction
    function ensureAudio() {
      if (!audioContext) {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
      }
      if (audioContext.state === 'suspended') audioContext.resume().catch(()=>{});
    }

    function playSound(type = 'click'){ 
      try{
        ensureAudio();
        const o = audioContext.createOscillator();
        const g = audioContext.createGain();
        o.connect(g); g.connect(audioContext.destination);
        o.type = 'sine';
        if(type==='dice'){ o.frequency.value = 820; g.gain.value = 0.18; g.gain.exponentialRampToValueAtTime(0.001,audioContext.currentTime+0.12) }
        else if(type==='attack'){ o.frequency.value = 200; g.gain.value = 0.35; g.gain.exponentialRampToValueAtTime(0.001,audioContext.currentTime+0.25) }
        else { o.frequency.value = 440; g.gain.value = 0.12; g.gain.exponentialRampToValueAtTime(0.001,audioContext.currentTime+0.08) }
        o.start(); o.stop(audioContext.currentTime + 0.2);
      }catch(e){/* fail silently */}
    }

    function vibrate(pattern){ if (navigator.vibrate) navigator.vibrate(pattern); }

    // Simple game state
    const state = { playerHP:100, enemyHP:100 };
    const diceEl = document.getElementById('dice');
    const logEl = document.getElementById('log');

    function log(msg){ const p=document.createElement('div'); p.textContent=msg; logEl.prepend(p); }

    function updateStats(){ document.getElementById('player-hp').textContent = state.playerHP; document.getElementById('enemy-hp').textContent = state.enemyHP; }

    function animateDiceTo(n){ diceEl.textContent = n; diceEl.animate([{transform:'translateY(-6px)'},{transform:'translateY(0)'}],{duration:260,iterations:1}); }

    function rollDice(){ ensureAudio(); playSound('dice'); vibrate(40);
      // animation + random
      diceEl.textContent = '...';
      const result = Math.floor(Math.random()*6)+1;
      setTimeout(()=>{ animateDiceTo(result); log(`Dé: ${result}`); }, 240);
      return result;
    }

    function attack(){ ensureAudio(); const dmg = rollDice(); // reuse rollDice result effect
      // small extra randomness
      const total = dmg + Math.floor(Math.random()*3);
      state.enemyHP = Math.max(0, state.enemyHP - total);
      playSound('attack'); vibrate([30,20,30]);
      log(`Vous infligez ${total} dégâts à l'ennemi.`);
      updateStats();
      if(state.enemyHP===0){ log('Victoire ! L ennemi est vaincu.'); }
      else enemyTurn();
    }

    function enemyTurn(){ setTimeout(()=>{
      const dmg = Math.floor(Math.random()*6)+1;
      state.playerHP = Math.max(0,state.playerHP - dmg);
      playSound('attack'); vibrate(60);
      log(`L'ennemi inflige ${dmg} dégâts.`); updateStats();
      if(state.playerHP===0){ log('Défaite... Vous êtes tombé.'); }
    }, 800);
    }

    document.getElementById('roll-btn').addEventListener('click', ()=>{ ensureAudio(); const r=rollDice(); log('Vous avez lancé le dé.'); });
    document.getElementById('attack-btn').addEventListener('click', ()=>{ ensureAudio(); attack(); });
    document.getElementById('reset-btn').addEventListener('click', ()=>{ state.playerHP=100; state.enemyHP=100; updateStats(); log('Partie réinitialisée.'); playSound('click'); });

    // Tabs
    document.querySelectorAll('.tab').forEach(btn=>btn.addEventListener('click', (e)=>{
      document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
      e.currentTarget.classList.add('active');
      const tab = e.currentTarget.dataset.tab;
      if(tab==='about') log('Ultimate Battle Arena — démo déployée via GitHub Pages.');
      if(tab==='modes') log('Modes: Solo, Duel, Tournoi.');
    }));

    // copy URL
    document.getElementById('copy-url').addEventListener('click', async ()=>{
      try{ await navigator.clipboard.writeText(document.getElementById('site-url').value); log('URL copiée dans le presse‑papier.'); playSound('click'); }
      catch{ log('Impossible de copier automatiquement — sélectionnez et copiez manuellement.'); }
    });

    // first interaction handler to resume audio in some browsers
    ['click','touchstart','keydown'].forEach(evt=>window.addEventListener(evt, ()=>{ if(!audioContext) ensureAudio(); }, {once:true,passive:true}));

    // init
    updateStats();
  </script>
</body>
</html>
